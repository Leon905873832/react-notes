## 正确的使用state

- 不可以直接修改`state`
```js
// 错误
this.state.comment = 'Hello';
//使用setState代替
// 正确
this.setState({comment: 'Hello'});
```
- `state`的更新有可能是异步的

`this.props`和`this.state`同时更新时,结果就不可靠了
```js
// Wrong
this.setState({
  counter: this.state.counter + this.props.increment,
});
```
`setState()`第二种写法，可以接收一个函数，函数的第一个参数是是更新前的`state`,当前更新的`props`作为第二个参数
```js
// Correct
this.setState((prevState, props) => ({
  counter: prevState.counter + props.increment
}));
```
- `state`可以合并更新

```js
  constructor(props) {
    super(props);
    this.state = {
      posts: [],
      comments: []
    };
  }
```
单独更新后，结果可以合并
```js
  componentDidMount() {
     fetchPosts().then(response => {
       this.setState({
         posts: response.posts
       });
     });

     fetchComments().then(response => {
       this.setState({
         comments: response.comments
       });
     });
  }
```